webpackJsonp([15],{bV4w:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("dZvs"),i=a.n(l);for(var r in l)"default"!==r&&function(e){a.d(t,e,function(){return l[e]})}(r);var o=a("blRM");var s=function(e){a("srUE")},n=a("C7Lr")(i.a,o.a,!1,s,null,null);t.default=n.exports},blRM:function(e,t,a){"use strict";var l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v(" 角色管理")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{attrs:{id:"app"}},[a("div",{staticStyle:{width:"50%",float:"left"}},[e._v("\n\n                角色名称：\n                "),a("el-input",{staticStyle:{width:"200px",heght:"30px"},attrs:{label:"角色编码",placeholder:"角色编码",size:"mini"},model:{value:e.s_rolename,callback:function(t){e.s_rolename=t},expression:"s_rolename"}}),e._v("\n\n                角色编码：\n                "),a("el-input",{staticStyle:{width:"200px",heght:"30px"},attrs:{label:"角色编码",placeholder:"角色编码",size:"mini"},model:{value:e.s_rolecode,callback:function(t){e.s_rolecode=t},expression:"s_rolecode"}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.getResult(1)}}},[e._v("搜索")]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"clearfix"},[a("el-col",{staticClass:"grid",attrs:{span:1}},[a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",size:"mini",round:""},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"mgt20",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"","tooltip-effect":"dark"},on:{"row-click":e.clickRow}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleCode",label:"角色编码",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleType",label:"角色类型"}}),e._v(" "),a("el-table-column",{attrs:{label:"编辑",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.enditRole(t.row)}}},[e._v("编辑")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"删除",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.delRole(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.roletotal},on:{"size-change":e.handleSizeChange,"current-change":e.getResult}}),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"166px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off"},model:{value:e.addForm.roleName,callback:function(t){e.$set(e.addForm,"roleName",t)},expression:"addForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色编码",prop:"roleCode"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off"},model:{value:e.addForm.roleCode,callback:function(t){e.$set(e.addForm,"roleCode",t)},expression:"addForm.roleCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色类型",prop:"roleType"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.addForm.roleType,callback:function(t){e.$set(e.addForm,"roleType",t)},expression:"addForm.roleType"}},e._l(e.roleTypeData,function(e){return a("el-option",{key:e.value,attrs:{label:e.dictDetailName,value:e.dictDetailValue}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:e.addSubmit}},[e._v("提交")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{width:"45%",float:"right"}},[a("div",{staticClass:"clearfix"},[a("el-col",{staticClass:"grid",attrs:{span:3}},[a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",size:"mini",round:""},on:{click:function(t){return e.addRoleUser(1)}}},[e._v("新增")])],1),e._v(" "),a("el-col",{staticClass:"grid",attrs:{span:1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:e.deleteUserRole}},[e._v("删除")])],1)],1),e._v(" "),a("el-table",{ref:"roleUserList",staticClass:"mgt20",staticStyle:{width:"100%"},attrs:{data:e.roleUserList,border:"",stripe:"","tooltip-effect":"dark"},on:{"selection-change":e.roleuserSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名称",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"targetId",label:"用户编号",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"id",width:"180"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.roleusercurrentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.roleusercount},on:{"current-change":e.getRoleUserList}}),e._v(" "),a("br"),e._v(" "),a("el-dialog",{attrs:{title:"新增用户",visible:e.addRoleUserVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addRoleUserVisible=t}}},[a("el-row",[a("el-col",{staticClass:"grid",attrs:{span:200}},[a("el-input",{staticStyle:{width:"200px",heght:"30px"},attrs:{label:"用户名称",placeholder:"请输入内容",size:"mini"},model:{value:e.s_username,callback:function(t){e.s_username=t},expression:"s_username"}})],1),e._v(" "),a("el-col",{staticClass:"grid",attrs:{span:1}},[a("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.addRoleUser(1)}}},[e._v("搜索")])],1)],1),e._v(" "),a("br"),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.userData,border:"",stripe:"","tooltip-effect":"dark"},on:{"selection-change":e.userSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"用户编号"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.usercurrentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.usercount},on:{"current-change":e.addRoleUser}}),e._v(" "),a("br"),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:e.saveUserRole}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.addRoleUserVisible=!1}}},[e._v("关闭")])],1)],1)],1)])])])},staticRenderFns:[]};t.a=l},dZvs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,i=a("aA9S"),r=(l=i)&&l.__esModule?l:{default:l};t.default={data:function(){return{tableData:[],roleTypeData:[],roleUserList:[],userData:[],roleuserSelect:[],input:"",curentroleid:"",curentrow:null,listLoading:!1,addFormVisible:!1,addLoading:!1,addRoleUserVisible:!1,roletotal:0,usercount:0,roleusercount:0,currentPage:1,usercurrentPage:1,roleusercurrentPage:1,pageSize:10,s_rolename:"",s_rolecode:"",s_username:"",addFormRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色编码",trigger:"blur"}],roleType:[{required:!0,message:"请输入角色类型",trigger:"blur"}]},addForm:[],UserSelection:[]}},methods:{handleSelect:function(e,t){console.log(e,t)},indexMethod:function(e){return e},getResult:function(e){var t=this;this.listLoading=!0;var a=(0,r.default)({},{currentPage:e,pageSize:10,roleName:this.s_rolename,roleCode:this.s_rolecode});this.$ajax({method:"post",url:"/api/sysrole-api/querySysRoleList",data:a}).then(function(e){t.tableData=e.data.data,t.roletotal=e.data.count,t.listLoading=!1},function(e){})},handleSizeChange:function(e){this.pageSize=e,this.getResult(1)},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=(0,r.default)({},e.addForm);e.$ajax({method:"post",url:"/api/sysrole-api/addRole",data:t}).then(function(t){e.addLoading=!1,e.$message({message:"提交成功",type:"success"}),e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.getResult(1)})})})},getRoleType:function(){var e=this;this.listLoading=!0;var t=new URLSearchParams;t.append("code","PT_ROLETYPE"),this.$ajax({method:"post",url:"/api/execute/api/sysDict/Web/searchCodeSysDictDetail",data:t}).then(function(t){e.roleTypeData=t.data.data},function(e){})},handleAdd:function(){this.addFormVisible=!0,this.addForm={id:0,roleName:"",roleCode:"",roleType:""}},enditRole:function(e){var t=this;this.listLoading=!0,this.addFormVisible=!0;var a=new URLSearchParams;a.append("id",e.id),this.$ajax({method:"post",url:"/api/sysrole-api/getSysRoleByid",data:a}).then(function(e){t.addForm=e.data.data,t.listLoading=!1})},delRole:function(e){var t=new URLSearchParams;t.append("id",e.id),this.$ajax({method:"post",url:"/api/sysrole-api/deleteSysRoleByid",data:t}).then(function(e){this.$message({message:"删除成功",type:"success"})},function(e){this.$message({message:"删除失败",type:"success"})})},getRoleUserList:function(e){var t=this;this.listLoading=!0;var a=(0,r.default)({},{currentPage:e,pageSize:10,roleId:this.curentroleid});this.$ajax({method:"post",url:"/api/sysrole-api/queryRoleUserList",data:a}).then(function(e){t.roleUserList=e.data.data,t.roleusercount=e.data.count})},clickRow:function(e){this.roleuserSelect=[];this.curentroleid=e.id,this.curentrow=e,this.getRoleUserList(1)},addRoleUser:function(e){this.addRoleUserVisible=!0;var t=this;this.listLoading=!0;var a=(0,r.default)({},{currentPage:e,pageSize:10,userName:this.s_username});this.$ajax({method:"post",url:"/api/sysuser-api/querySysUserList",data:a}).then(function(e){t.userData=e.data.data,t.usercount=e.data.count})},deleteRoleUser:function(){var e=new URLSearchParams;e.append("id",row.id),this.$ajax({method:"post",url:"/api/sysrole-api/deleteSysRoleUserByid",data:e}).then(function(e){this.$message({message:"删除成功",type:"success"})})},userSelectionChange:function(e){this.UserSelection=e},roleuserSelectChange:function(e){this.roleuserSelect=e},saveUserRole:function(){var e=this;""==this.curentroleid&&alert("请选择要添加的角色，单击选择行。");var t=this.UserSelection;t&&t.forEach(function(t){e.listLoading=!0;var a=(0,r.default)({},{id:0,roleId:e.curentroleid,targetId:t.id});e.$ajax({method:"post",url:"/api/sysrole-api/saveRoleUser",data:a}).then(function(e){})}),this.addRoleUserVisible=!1,this.clickRow(this.curentrow)},deleteUserRole:function(){var e=this,t=this.roleuserSelect;t&&t.forEach(function(t){e.listLoading=!0;var a=new URLSearchParams;a.append("id",t.id),e.$ajax({method:"post",url:"/api/sysrole-api/deleteSysRoleUserByid",data:a}).then(function(e){})}),this.addRoleUserVisible=!1,this.clickRow(this.curentrow)}},mounted:function(){this.getResult(),this.getRoleType()}}},srUE:function(e,t){}});
//# sourceMappingURL=15.c0d8ee669f1b61e47338.js.map