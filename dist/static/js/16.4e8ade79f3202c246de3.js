webpackJsonp([16],{"4+lh":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i(a("3cXf")),r=i(a("aA9S"));function i(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{tableData:[],roleTypeData:[],treeData:[],input:"",curentroleid:"",curentrow:null,listLoading:!1,addLoading:!1,roletotal:0,currentPage:1,pageSize:10,s_rolename:"",s_rolecode:"",defaultProps:{children:"children",label:"name"}}},methods:{handleSelect:function(e,t){console.log(e,t)},indexMethod:function(e){return e},getResult:function(e){var t=this;this.listLoading=!0;var a=(0,r.default)({},{currentPage:e,pageSize:10,roleName:this.s_rolename,roleCode:this.s_rolecode});this.$ajax({method:"post",url:"/api/sysrole-api/querySysRoleList",data:a}).then(function(e){t.tableData=e.data.data,t.roletotal=e.data.count,t.listLoading=!1},function(e){})},handleSizeChange:function(e){this.pageSize=e,this.getResult(1)},getresourceData:function(){var e=this,t=(0,r.default)({},{});this.$ajax({method:"post",url:"/api/sysResource_api/getSysResourceList",data:t}).then(function(t){e.treeData=t.data.data},function(e){})},clickRow:function(e){var t=this;t.roleuserSelect=[],t.curentroleid=e.id,t.curentrow=e;var a=(0,r.default)({},{roleId:t.curentroleid});this.$ajax({method:"post",url:"/api/sysAcl-api/getSysAclList",data:a}).then(function(e){var a=[];e.data.data.forEach(function(e){a.push(e.resoureId)}),console.log((0,l.default)(a)),t.$refs.tree.setCheckedKeys(a)},function(e){})},saveRoleacl:function(){var e=this;""==this.curentroleid&&alert("请选择要添加的角色，单击选择行。");var t=this.$refs.tree.getCheckedKeys(),a=this.curentroleid;if(t.length>0){this.listLoading=!0;var l=(0,r.default)({},{id:0,roleId:a,resourceids:t});this.$ajax({method:"post",url:"/api/sysAcl-api/insertSysAcl",data:l}).then(function(t){alert(t.data.message),e.clickRow(e.curentrow)})}}},mounted:function(){this.getResult(),this.getresourceData()}}},Dc9I:function(e,t,a){"use strict";var l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v(" 角色资源管理")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{attrs:{id:"app"}},[a("div",{staticStyle:{width:"50%",float:"left"}},[a("div",[e._v("\n                    角色名称：\n                    "),a("el-input",{staticStyle:{width:"200px",heght:"30px"},attrs:{label:"角色编码",placeholder:"角色编码",size:"mini"},model:{value:e.s_rolename,callback:function(t){e.s_rolename=t},expression:"s_rolename"}}),e._v("\n                    角色编码：\n                    "),a("el-input",{staticStyle:{width:"200px",heght:"30px"},attrs:{label:"角色编码",placeholder:"角色编码",size:"mini"},model:{value:e.s_rolecode,callback:function(t){e.s_rolecode=t},expression:"s_rolecode"}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.getResult(1)}}},[e._v("搜索")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"mgt20",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"","tooltip-effect":"dark"},on:{"row-click":e.clickRow}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleCode",label:"角色编码",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleType",label:"角色类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"id"}})],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.roletotal},on:{"size-change":e.handleSizeChange,"current-change":e.getResult}})],1),e._v(" "),a("div",{staticStyle:{width:"45%",float:"right"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:e.saveRoleacl}},[e._v("保存")]),e._v(" "),a("el-tree",{ref:"tree",staticClass:"mgt20",attrs:{data:e.treeData,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"","check-strictly":!0,props:e.defaultProps}})],1)])])])},staticRenderFns:[]};t.a=l},UeFb:function(e,t){},wKKZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("4+lh"),r=a.n(l);for(var i in l)"default"!==i&&function(e){a.d(t,e,function(){return l[e]})}(i);var n=a("Dc9I");var o=function(e){a("UeFb")},s=a("C7Lr")(r.a,n.a,!1,o,null,null);t.default=s.exports}});
//# sourceMappingURL=16.4e8ade79f3202c246de3.js.map