webpackJsonp([20],{"+VU6":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=a("aA9S"),s=(r=o)&&r.__esModule?r:{default:r};t.default={data:function(){return{treeData:[],addFormVisible:!1,addLoading:!1,defaultProps:{children:"children",label:"name"},addForm:{},resoureTypeOptions:[{value:"module",label:"module"},{value:"url",label:"url"},{value:"button",label:"button"}],permission:"",formRules:{resoureName:[{required:!0,message:"请输入资源名称",trigger:"blur"}],resoureType:[{required:!0,message:"请选择资源类型",trigger:"blur"}],parentId:[{required:!0,message:"请输入机构名称",trigger:"blur"}]}}},methods:{handleNodeClick:function(e){console.log(e)},getResult:function(){var e=this,t=(0,s.default)({},{});this.$ajax({method:"post",url:"/api/sysResource_api/getSysResourceList",data:t}).then(function(t){e.treeData=t.data.data},function(e){})},append:function(e,t){var a=this;if("1"==t&&(this.addForm.id="0",this.addFormVisible=!0,this.addForm={id:0,resoureName:"",resoureType:"",permission:"",resoureUrl:"",parentId:e.data.id}),"2"==t){var r=new URLSearchParams,o=e.data.id;r.append("ID",o),this.$ajax({method:"post",url:"/api/sysResource_api/querySysResourceByPrimaryKey",data:r}).then(function(e){a.addForm=e.data.data,a.listLoading=!1}),this.addFormVisible=!0}},remove:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){var r=new URLSearchParams;r.append("orgid",e.data.id),a.$ajax({method:"post",url:"/api/sysResource_api/deleteResourceByID",data:r}).then(function(r){a.$message({message:"删除成功",type:"success"});var o=e.parent,s=o.data.children||o.data,i=s.findIndex(function(e){return e.id===t.id});s.splice(i,1)})}).catch(function(){})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=(0,s.default)({},e.addForm);e.$ajax({method:"post",url:"/api/sysResource_api/saveSysResource",data:t}).then(function(t){e.addLoading=!1,e.$message({message:"提交成功",type:"success"}),e.addFormVisible=!1,e.getResult()})})})}},mounted:function(){this.getResult()}}},Fkto:function(e,t,a){"use strict";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v(" 资源管理")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"custom-tree-container"},[a("div",{staticClass:"block"},[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,o=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(r.label)+"                           \n                           "),a("i",{staticClass:"el-icon-plus",on:{click:function(){return e.append(r,"1")}}}),e._v(" "),a("i",{staticClass:"el-icon-edit-outline",on:{click:function(){return e.append(r,"2")}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(){return e.remove(r,o)}}})])])}}])})],1)])])]),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.formRules}},[a("el-form-item",{attrs:{label:"名称",prop:"resoureName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.resoureName,callback:function(t){e.$set(e.addForm,"resoureName",t)},expression:"addForm.resoureName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"resoureType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.resoureType,callback:function(t){e.$set(e.addForm,"resoureType",t)},expression:"addForm.resoureType"}},e._l(e.resoureTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限标识",prop:"permission"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"路由path为'/index'则配index"},model:{value:e.addForm.permission,callback:function(t){e.$set(e.addForm,"permission",t)},expression:"addForm.permission"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"URL地址",prop:"resoureUrl"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"可为空"},model:{value:e.addForm.resoureUrl,callback:function(t){e.$set(e.addForm,"resoureUrl",t)},expression:"addForm.resoureUrl"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:e.addSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};t.a=r},YVyp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("+VU6"),o=a.n(r);for(var s in r)"default"!==s&&function(e){a.d(t,e,function(){return r[e]})}(s);var i=a("Fkto"),l=a("C7Lr")(o.a,i.a,!1,null,null,null);t.default=l.exports}});
//# sourceMappingURL=20.3aaa1a2623b3f1c98d4d.js.map