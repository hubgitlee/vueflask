webpackJsonp([19],{OsPn:function(e,t,a){"use strict";var o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v(" 角色权限管理")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[e._v("\n       \n             角色编码： "),a("el-input",{staticStyle:{width:"200px",heght:"30px"},attrs:{placeholder:"角色编码",size:"mini"},model:{value:e.s_rolecode,callback:function(t){e.s_rolecode=t},expression:"s_rolecode"}}),e._v("\n         \n             映射角色编码：  "),a("el-input",{staticStyle:{width:"200px",heght:"30px"},attrs:{placeholder:"映射角色编码",size:"mini"},model:{value:e.s_maprolecode,callback:function(t){e.s_maprolecode=t},expression:"s_maprolecode"}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.getResult(1)}}},[e._v("搜索")]),e._v(" "),a("br"),e._v(" "),a("br")],1),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",size:"mini",round:""},on:{click:e.handleAdd}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:e.handledelete}},[e._v("删除")]),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"mgt20",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"","tooltip-effect":"dark"},on:{"selection-change":e.selectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleCode",label:"角色",width:"180",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"mappingRoleCode",label:"映射角色",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"id"}})],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.count},on:{"current-change":e.getResult}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"角色",prop:"roleName"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.roleCode,callback:function(t){e.$set(e.addForm,"roleCode",t)},expression:"addForm.roleCode"}},e._l(e.rolelist,function(e){return a("el-option",{key:e.roleCode,attrs:{label:e.roleName,value:e.roleCode}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"映射角色",prop:"roleCode"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.addForm.mappingRoleCode,callback:function(t){e.$set(e.addForm,"mappingRoleCode",t)},expression:"addForm.mappingRoleCode"}},e._l(e.rolelist,function(e){return a("el-option",{key:e.roleCode,attrs:{label:e.roleName,value:e.roleCode}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:e.addSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};t.a=o},jipg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("wfrg"),l=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);var n=a("OsPn"),r=a("C7Lr")(l.a,n.a,!1,null,null,null);t.default=r.exports},wfrg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(a("aA9S")),l=i(a("a3Yh"));function i(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){var e;return e={s_rolecode:"",s_maprolecode:"",addFormVisible:!1,tableData:[],rolelist:[],addForm:[],selectList:[],addLoading:!1,count:0,currentPage:1,pageSize:10,addFormRules:{}},(0,l.default)(e,"addForm",[]),(0,l.default)(e,"rolelist",[]),e},methods:{getResult:function(e){var t=this,a=(0,o.default)({},{currentPage:e,pageSize:10,roleCode:this.s_rolecode,mappingRoleCode:this.s_maprolecode});this.$ajax({method:"post",url:"/api/sysRoleMapping-api/querySysRoleMappingList",data:a}).then(function(e){t.tableData=e.data.data,t.count=e.data.count},function(e){})},getrolelist:function(){var e=this,t=(0,o.default)({},{});this.$ajax({method:"post",url:"/api/sysrole-api/querySysRoleList",data:t}).then(function(t){e.rolelist=t.data.data},function(e){})},selectChange:function(e){this.selectList=e},indexMethod:function(e){return e},handleAdd:function(){this.addFormVisible=!0,this.addForm={id:0,roleCode:"",mappingRoleCode:[]}},handledelete:function(){var e=this,t=this.selectList;t&&(t.forEach(function(t){e.listLoading=!0;var a=new URLSearchParams;a.append("ids",t.id),e.$ajax({method:"post",url:"/api/sysRoleMapping-api/deleteSysRoleMapping",data:a}).then(function(e){})}),this.getResult(1))},addSubmit:function(){var e=this,t=this;this.$refs.addForm.validate(function(a){a&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addForm.mappingRoleCode.forEach(function(t){var a=(0,o.default)({},{roleCode:e.addForm.roleCode,mappingRoleCode:t});e.$ajax({method:"post",url:"/api/sysRoleMapping-api/add",data:a}).then(function(e){})}),e.$message({message:"提交成功",type:"success"}),t.addFormVisible=!1,e.getResult(1)})})}},mounted:function(){this.getResult(1),this.getrolelist()}}}});
//# sourceMappingURL=19.11b94a428b5c86ccf833.js.map