webpackJsonp([21],{H6bT:function(e,t,a){"use strict";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v(" 菜单管理")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"custom-tree-container"},[a("div",{staticClass:"block"},[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.node,o=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(r.label)+"                           \n                           "),a("i",{staticClass:"el-icon-plus",on:{click:function(){return e.append(r,"1")}}}),e._v(" "),a("i",{staticClass:"el-icon-edit-outline",on:{click:function(){return e.append(r,"2")}}}),e._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(){return e.remove(r,o)}}})])])}}])})],1)])])]),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.formRules}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.menuName,callback:function(t){e.$set(e.addForm,"menuName",t)},expression:"addForm.menuName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"orderBy"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.orderBy,callback:function(t){e.$set(e.addForm,"orderBy",t)},expression:"addForm.orderBy"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"menuIcon"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.menuIcon,callback:function(t){e.$set(e.addForm,"menuIcon",t)},expression:"addForm.menuIcon"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"资源",prop:"resoureUrl"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.resourceVisible=!0}}},[e._v(e._s(e.addForm.resourceName))])],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示",prop:"isShow"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.addForm.isShow,callback:function(t){e.$set(e.addForm,"isShow",t)},expression:"addForm.isShow"}},e._l(e.isShowOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.addLoading},on:{click:e.addSubmit}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"资源",visible:e.resourceVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.resourceVisible=t}}},[a("el-tree",{ref:"resourcetreeref",attrs:{data:e.resourcetree,props:e.defaultProps},on:{"node-click":e.handleNodeClick},model:{value:e.addForm.resourceId,callback:function(t){e.$set(e.addForm,"resourceId",t)},expression:"addForm.resourceId"}})],1)],1)},staticRenderFns:[]};t.a=r},o6D9:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(a("3cXf")),o=s(a("aA9S"));function s(e){return e&&e.__esModule?e:{default:e}}t.default={data:function(){return{treeData:[],resourcetree:[],addFormVisible:!1,addLoading:!1,resourceVisible:!1,resourcename:"",defaultProps:{children:"children",label:"name"},addForm:{},resoureTypeOptions:[{value:"module",label:"module"},{value:"url",label:"url"},{value:"button",label:"button"}],formRules:{resoureName:[{required:!0,message:"请输入资源名称",trigger:"blur"}],resoureType:[{required:!0,message:"请选择资源类型",trigger:"blur"}],parentId:[{required:!0,message:"请输入机构名称",trigger:"blur"}]},isShowOptions:[{value:1,label:"是"},{value:0,label:"否"}]}},methods:{handleNodeClick:function(e){console.log(e);this.addForm.resourceName=e.name,this.addForm.resourceId=e.id,this.resourceVisible=!1},getResult:function(){var e=this,t=(0,o.default)({},{});this.$ajax({method:"post",url:"/api/sysMenu-api/querySysMenuList",data:t}).then(function(t){e.treeData=t.data.data},function(e){})},getresourceResult:function(){var e=this,t=(0,o.default)({},{});this.$ajax({method:"post",url:"/api/sysResource_api/getSysResourceList",data:t}).then(function(t){e.resourcetree=t.data.data},function(e){})},append:function(e,t){var a=this;if("1"==t&&(this.addForm.id="0",this.addFormVisible=!0,this.addForm={id:0,menuName:"",orderBy:"",menuIcon:"",resourceId:"",parentId:e.data.id,resourceName:"--请选择--",isShow:1}),"2"==t){var o=new URLSearchParams,s=e.data.id;o.append("ID",s),this.$ajax({method:"post",url:"/api/sysMenu-api/querySysMenuByPrimaryKey",data:o}).then(function(e){a.addForm=e.data.data,console.log((0,r.default)(a.addForm)),""==a.addForm.resourceName&&(a.addForm.resourceName="--请选择--"),a.listLoading=!1}),this.addFormVisible=!0}},remove:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){var r=new URLSearchParams;r.append("ids",e.data.id),a.$ajax({method:"post",url:"/api/sysMenu-api/deleteSysMenu",data:r}).then(function(r){a.$message({message:"删除成功",type:"success"});var o=e.parent,s=o.data.children||o.data,i=s.findIndex(function(e){return e.id===t.id});s.splice(i,1),a.getResult()})}).catch(function(){})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=(0,o.default)({},e.addForm);e.$ajax({method:"post",url:"/api/sysMenu-api/add",data:t}).then(function(t){e.addLoading=!1,e.$message({message:"提交成功",type:"success"}),e.addFormVisible=!1,e.getResult()})})})}},mounted:function(){this.getResult(),this.getresourceResult()}}},q5QV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("o6D9"),o=a.n(r);for(var s in r)"default"!==s&&function(e){a.d(t,e,function(){return r[e]})}(s);var i=a("H6bT"),d=a("C7Lr")(o.a,i.a,!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=21.411bf12a3efd743e85fe.js.map